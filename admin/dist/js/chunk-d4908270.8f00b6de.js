(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-d4908270"],{3433:function(e,t,a){"use strict";a.r(t);var l=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("d2-container",[a("div",{staticClass:"messagePromotionAdd mytable"},[a("div",{staticStyle:{margin:"20px 0px",overflow:"auto"}},[a("el-col",{staticClass:"jibie"},[e._v("格式：")]),a("el-col",{staticStyle:{width:"200px","margin-right":"10px"}},[a("el-select",{attrs:{placeholder:"选择格式",clearable:""},model:{value:e.typevalue,callback:function(t){e.typevalue=t},expression:"typevalue"}},e._l(e.typeinfo,function(e){return a("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})}),1)],1),a("el-col",{staticStyle:{width:"100px"}},[a("el-button",{attrs:{type:"primary",icon:"el-icon-search",round:"",loading:e.loadingStatus},on:{click:function(t){return e.getServiceData()}}},[e._v("搜索")])],1),a("el-col",{staticStyle:{width:"100px","margin-left":"20px"}},[a("el-button",{attrs:{type:"primary",icon:"el-icon-upload",round:"",loading:e.signup},on:{click:function(t){return e.addtype()}}},[e._v("上传资料")])],1)],1),a("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.loadingStatus,expression:"loadingStatus"}],staticStyle:{"margin-top":"20px"},attrs:{data:e.orderData,border:"",stripe:""}},[a("el-table-column",{attrs:{prop:"class_name",label:"课程类型"}}),a("el-table-column",{attrs:{prop:"title",label:"标题"}}),a("el-table-column",{attrs:{prop:"need_duration",label:"学习时长"}}),a("el-table-column",{attrs:{prop:"get_score",label:"学习积分"}}),a("el-table-column",{attrs:{prop:"type",label:"格式"},scopedSlots:e._u([{key:"default",fn:function(t){return[1==t.row.type?a("span",[e._v("PDF")]):2==t.row.type?a("span",[e._v("视频")]):3==t.row.type?a("span",[e._v("音频")]):a("span")]}}])}),a("el-table-column",{attrs:{prop:"type",label:"考题"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",{staticClass:"spanstyle",on:{click:function(a){return e.joinquestion(t.row)}}},[e._v("关联考题")])]}}])}),a("el-table-column",{attrs:{prop:"status",label:"操作"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",{staticClass:"spanstyle",on:{click:function(a){return e.editinfo(t.row)}}},[e._v("编辑")]),1==t.row.status?a("span",{staticClass:"stop",on:{click:function(a){return e.changestatus(t.row)}}},[e._v("禁用")]):a("span",{staticClass:"start",on:{click:function(a){return e.changestatus(t.row)}}},[e._v("启用")])]}}])})],1),a("div",{staticStyle:{"text-align":"center"}},[a("el-pagination",{attrs:{"current-page":e.page,"page-sizes":[10,20,30,50,100],"page-size":e.page_count,layout:"total, sizes, prev, pager, next, jumper",total:e.total_count},on:{"size-change":e.handleSizeChange,"current-change":e.handleCurrentChange}})],1),a("el-dialog",{staticClass:"dialone",attrs:{title:e.dialog,visible:e.dialogFormVisible},on:{"update:visible":function(t){e.dialogFormVisible=t},close:function(t){return e.resetForm("ruleForm")}}},[a("el-form",{ref:"ruleForm",staticClass:"demo-ruleForm",attrs:{model:e.ruleForm,rules:e.rules,"label-width":"200px"}},[a("el-form-item",{attrs:{label:"课程类型：",prop:"class_id"}},[a("el-select",{staticClass:"width250",attrs:{placeholder:"选择类型",clearable:""},model:{value:e.ruleForm.class_id,callback:function(t){e.$set(e.ruleForm,"class_id",t)},expression:"ruleForm.class_id"}},e._l(e.culuminfo,function(e){return a("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})}),1)],1),a("el-form-item",{attrs:{label:"标题：",prop:"title"}},[a("el-input",{staticClass:"width250",attrs:{clearable:""},model:{value:e.ruleForm.title,callback:function(t){e.$set(e.ruleForm,"title",t)},expression:"ruleForm.title"}})],1),a("el-form-item",{attrs:{label:"学习时长：",prop:"need_duration"}},[a("el-input",{staticClass:"width250",attrs:{clearable:"",placeholder:"以秒单位输入"},model:{value:e.ruleForm.need_duration,callback:function(t){e.$set(e.ruleForm,"need_duration",t)},expression:"ruleForm.need_duration"}})],1),a("el-form-item",{attrs:{label:"学习积分：",prop:"get_score"}},[a("el-input",{staticClass:"width250",attrs:{clearable:""},model:{value:e.ruleForm.get_score,callback:function(t){e.$set(e.ruleForm,"get_score",t)},expression:"ruleForm.get_score"}})],1),a("el-form-item",{attrs:{label:"介绍：",prop:"desc"}},[a("el-input",{staticClass:"width250",attrs:{type:"textarea",clearable:""},model:{value:e.ruleForm.desc,callback:function(t){e.$set(e.ruleForm,"desc",t)},expression:"ruleForm.desc"}})],1),a("el-form-item",{attrs:{label:"上传资料：",prop:"file_name"}},[a("el-upload",{staticClass:"upload-demo",attrs:{action:e.uploadurl,"on-preview":e.handlePreview,"on-remove":e.handleRemove,"before-remove":e.beforeRemove,multiple:"",limit:1,"on-exceed":e.handleExceed,"on-success":e.excelSuccess,"file-list":e.fileList}},[a("el-button",{attrs:{size:"small",type:"primary"}},[e._v("点击上传")]),a("div",{staticClass:"el-upload__tip",attrs:{slot:"tip"},slot:"tip"},[e._v("只能上传pdf、mp3、mp4文件")])],1)],1),a("el-form-item",{attrs:{label:"设置实习生是否可学习：",prop:"view_permission"}},[a("el-radio-group",{model:{value:e.ruleForm.view_permission,callback:function(t){e.$set(e.ruleForm,"view_permission",t)},expression:"ruleForm.view_permission"}},[a("el-radio",{attrs:{label:"1"}},[e._v("是")]),a("el-radio",{attrs:{label:"2"}},[e._v("否")])],1)],1),a("el-form-item",[a("el-button",{attrs:{type:"primary",loading:e.laoding_b},on:{click:function(t){return e.submitForm("ruleForm")}}},[e._v("确定")]),a("el-button",{on:{click:function(t){return e.resetForm("ruleForm")}}},[e._v("取消")])],1)],1)],1),a("el-dialog",{attrs:{title:"关联考题",visible:e.messagetype},on:{"update:visible":function(t){e.messagetype=t}}},[a("el-tabs",{attrs:{type:"card"},on:{"tab-click":e.handleClick},model:{value:e.activeName,callback:function(t){e.activeName=t},expression:"activeName"}},[a("el-tab-pane",{attrs:{label:"搜索考题",name:"select"}},[a("div",{staticStyle:{margin:"10px 0px",overflow:"auto"}},[a("el-col",{staticClass:"jibie"},[e._v("类型：")]),a("el-col",{staticStyle:{width:"150px","margin-right":"10px"}},[a("el-select",{attrs:{placeholder:"选择类型",clearable:""},model:{value:e.labelvalue,callback:function(t){e.labelvalue=t},expression:"labelvalue"}},e._l(e.labelinfo,function(e){return a("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})}),1)],1),a("el-col",{staticStyle:{width:"150px","margin-right":"20px"}},[a("el-input",{attrs:{placeholder:"请输标题",clearable:""},model:{value:e.title,callback:function(t){e.title=t},expression:"title"}})],1),a("el-col",{staticStyle:{width:"100px"}},[a("el-button",{attrs:{type:"primary",icon:"el-icon-search",round:"",loading:e.loading_m},on:{click:function(t){return e.getmessage()}}},[e._v("搜索")])],1),a("el-col",{staticStyle:{width:"100px"}},[a("el-button",{attrs:{type:"primary",round:"",loading:e.loading_m},on:{click:function(t){return e.relation()}}},[e._v("关联考题")])],1)],1),a("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.loading_m,expression:"loading_m"}],staticStyle:{"margin-top":"20px"},attrs:{data:e.messageData,border:"",stripe:""},on:{"selection-change":e.handleSelectionChange}},[e._v(">\n                        "),a("el-table-column",{attrs:{type:"selection",width:"55"}}),a("el-table-column",{attrs:{prop:"title",label:"标题"}}),a("el-table-column",{attrs:{prop:"label",label:"题目类型"},scopedSlots:e._u([{key:"default",fn:function(t){return[1==t.row.label?a("span",[e._v("基础")]):2==t.row.label?a("span",[e._v("专业")]):4==t.row.label?a("span",[e._v("营销")]):a("span")]}}])}),a("el-table-column",{attrs:{prop:"type",label:"分类"},scopedSlots:e._u([{key:"default",fn:function(t){return[1==t.row.type?a("span",[e._v("单选")]):2==t.row.type?a("span",[e._v("多选")]):a("span")]}}])})],1),a("div",{staticStyle:{"text-align":"center"}},[a("el-pagination",{attrs:{"current-page":e.page_m,"page-sizes":[10,20,30,50,100],"page-size":e.page_count_m,layout:"total, sizes, prev, pager, next, jumper",total:e.total_count_m},on:{"size-change":e.handleSizeChange_m,"current-change":e.handleCurrentChange_m}})],1)],1),a("el-tab-pane",{attrs:{label:"已关联考题",name:"checked"}},[a("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.loading_m,expression:"loading_m"}],staticStyle:{"margin-top":"20px"},attrs:{data:e.messageData,border:"",stripe:""}},[a("el-table-column",{attrs:{prop:"title",label:"标题"}}),a("el-table-column",{attrs:{prop:"label",label:"题目类型"},scopedSlots:e._u([{key:"default",fn:function(t){return[1==t.row.type?a("span",[e._v("基础")]):2==t.row.type?a("span",[e._v("专业")]):4==t.row.type?a("span",[e._v("营销")]):a("span")]}}])}),a("el-table-column",{attrs:{prop:"type",label:"分类"},scopedSlots:e._u([{key:"default",fn:function(t){return[1==t.row.type?a("span",[e._v("单选")]):2==t.row.type?a("span",[e._v("多选")]):a("span")]}}])}),a("el-table-column",{attrs:{label:"操作"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",{staticClass:"stop_del",on:{click:function(a){return e.deletegq(t.row)}}},[e._v("删除")])]}}])})],1)],1)],1)],1)],1)])},s=[],i=(a("7f7f"),a("d84e")),r={data:function(){return{loadingStatus:!1,signup:!1,page:1,page_count:10,total_count:0,orderData:[],typevalue:"",typeinfo:[{value:"1",label:"PDF"},{value:"2",label:"视频"},{value:"3",label:"音频"}],culuminfo:[],dialog:"上传资料",dialogFormVisible:!1,laoding_b:!1,ruleForm:{class_id:"",title:"",need_duration:"",get_score:"",desc:"",file_name:"",view_permission:""},rules:{class_id:[{required:!0,message:"请选择课程类型",trigger:"change"}],title:[{required:!0,message:"请输入标题",trigger:"blur"}],need_duration:[{required:!0,message:"请输入学习时长",trigger:"blur"}],get_score:[{required:!0,message:"请输入学习积分",trigger:"blur"}],view_permission:[{required:!0,message:"请选择是否可学习",trigger:"change"}]},uploadurl:i["a"].uploadfile,fileList:[],mater_id:"",messagetype:!1,page_m:1,page_count_m:10,total_count_m:0,activeName:"select",loading_m:!1,m_id:"",messageData:[],labelvalue:"",labelinfo:[{value:"1",label:"基础"},{value:"2",label:"专业"},{value:"4",label:"营销"}],title:"",multipleSelection:[]}},created:function(){this.getServiceData(),this.getclasslist()},methods:{relation:function(){if(this.multipleSelection.length<1)this.$message({message:"请至少选择一个考题",type:"error"});else{for(var e="",t=0;t<this.multipleSelection.length;t++)e=e+","+this.multipleSelection[t].id;this.changektms(1,e)}},deletegq:function(e){this.changektms(2,e.id)},changektms:function(e,t){var a=this,l="&id="+this.m_id+"&content="+t+"&type="+e;this.$http.get(i["a"].changektms+l).then(function(t){var l=t.data.data;""==l.msg?(a.$message({type:"success",message:"操作成功!"}),1==e?a.getmessage():a.getchwckedq()):a.$message({type:"error",message:l.msg})},function(){this.loading_m=!1,this.$message({message:"请求失败",type:"error"})})},handleSelectionChange:function(e){this.multipleSelection=e},editinfo:function(e){this.fileList=[],this.dialog="编辑资料",this.ruleForm.class_id=e.class_id,this.ruleForm.title=e.title,this.ruleForm.need_duration=e.need_duration,this.ruleForm.get_score=e.get_score,this.ruleForm.desc=e.desc,this.ruleForm.file_name=e.file_name,this.ruleForm.view_permission=e.view_permission,this.mater_id=e.id;var t={};t.name=e.file_name,t.url="",this.fileList[0]=t,this.dialogFormVisible=!0},addtype:function(){this.dialog="上传资料",this.ruleForm.class_id="",this.ruleForm.title="",this.ruleForm.need_duration="",this.ruleForm.get_score="",this.ruleForm.desc="",this.ruleForm.file_name="",this.ruleForm.view_permission="",this.tiku_id="",this.mater_id="",this.fileList=[],this.dialogFormVisible=!0},joinquestion:function(e){this.m_id=e.id,this.messagetype=!0,this.activeName="select",this.title="",this.labelvalue="",this.multipleSelection=[],this.getmessage()},handleClick:function(e,t){this.page_m=1,this.title="",this.labelvalue="",this.multipleSelection=[],"select"==this.activeName?this.getmessage():this.getchwckedq()},getchwckedq:function(){var e=this;this.loading_m=!0,this.$http.get(i["a"].getquesbymid+"&id="+this.m_id).then(function(t){var a=t.data.data;0==t.data.msg&&(e.messageData=a.res,e.loading_m=!1)},function(){this.loading_m=!1,this.$message({message:"请求失败",type:"error"})})},getmessage:function(){var e=this;this.loading_m=!0;var t="&page="+this.page_m+"&page_size="+this.page_count_m+"&label="+this.labelvalue+"&title="+this.title;this.$http.get(i["a"].questionslist+t).then(function(t){var a=t.data.data;0==t.data.msg&&(e.total_count_m=a.count,e.messageData=a.res,e.loading_m=!1)},function(){this.loading_m=!1,this.$message({message:"请求失败",type:"error"})})},submitForm:function(e){var t=this;this.$refs[e].validate(function(e){if(!e)return!1;if(""!=t.ruleForm.file_name){t.laoding_b=!0;var a="&class_id="+t.ruleForm.class_id+"&title="+t.ruleForm.title+"&need_duration="+t.ruleForm.need_duration+"&get_score="+t.ruleForm.get_score+"&desc="+t.ruleForm.desc+"&file_name="+t.ruleForm.file_name+"&view_permission="+t.ruleForm.view_permission+"&mater_id="+t.mater_id;t.$http.get(i["a"].materiaadd+a).then(function(e){var a=e.data.data;t.laoding_b=!1,""==a.msg?(t.$message({type:"success",message:"操作成功!"}),t.resetForm("ruleForm"),t.getServiceData()):t.$message({type:"error",message:a.msg})},function(){this.laoding_b=!1,this.$message({message:"请求失败",type:"error"})})}else t.$message({type:"error",message:"未上传资料"})})},handleRemove:function(e,t){},handlePreview:function(e){},handleExceed:function(e,t){t.length>0&&this.$message.warning("最多只允许上传一个文件请先删除！")},excelSuccess:function(e,t,a){""==e.data.msg?(this.ruleForm.file_name=e.data.res,this.$message({type:"success",message:"上传成功!"})):this.$message({type:"error",message:e.data.msg})},beforeRemove:function(e,t){return this.$confirm("确定移除 ".concat(e.name,"？"))},getclasslist:function(){var e=this,t="&page=1&page_size=1000";this.$http.get(i["a"].curriculumlist+t).then(function(t){var a=t.data.data,l=[];if(0==t.data.msg){for(var s=0;s<a.res.length;s++){var i={};i.value=a.res[s].id,i.label=a.res[s].name,l[l.length]=i}e.culuminfo=l}},function(){this.$message({message:"请求失败",type:"error"})})},resetForm:function(e){this.dialogFormVisible=!1,this.$refs[e].resetFields()},changestatus:function(e){var t=this,a="启用",l=1;if(1==e.status)a="禁用",l=0;this.$confirm("此操作将"+a+"该用户权限, 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){var a="&status="+l+"&id="+e.id;t.$http.get(i["a"].materiaedit+a).then(function(e){var a=e.data.data;t.laoding_a=!1,""==a.msg?(t.$message({type:"success",message:"操作成功!"}),t.showchangetrue=!1,t.getServiceData()):t.$message({type:"error",message:a.msg})},function(){this.loadingStatus=!1,this.$message({message:"请求失败",type:"error"})})}).catch(function(){t.$message({type:"info",message:"已取消操作"})})},getServiceData:function(){var e=this;this.loadingStatus=!0;var t="&page="+this.page+"&page_size="+this.page_count+"&type="+this.typevalue;this.$http.get(i["a"].materialist+t).then(function(t){var a=t.data.data;0==t.data.msg&&(e.total_count=a.count,e.orderData=a.res,e.loadingStatus=!1)},function(){this.loadingStatus=!1,this.$message({message:"请求失败",type:"error"})})},handleSizeChange:function(e){this.page_count=30,e>0&&(this.page_count=e),this.getServiceData()},handleCurrentChange:function(e){this.page=0==e?1:e,this.getServiceData()},handleSizeChange_m:function(e){this.page_count_m=30,e>0&&(this.page_count_m=e),this.getmessage()},handleCurrentChange_m:function(e){this.page_m=0==e?1:e,this.getmessage()}}},n=r,o=(a("52ba"),a("2877")),u=function(e){e.options.__source="src/views/yun/shortmessage/material/material.vue"},c=u,m=Object(o["a"])(n,l,s,!1,null,"91f18f56",null);"function"===typeof c&&c(m);t["default"]=m.exports},"52ba":function(e,t,a){"use strict";var l=a("ecc7"),s=a.n(l);s.a},d84e:function(e,t,a){"use strict";a.d(t,"a",function(){return s});var l=window.location.protocol+"//"+document.domain+"/api/public",s={};s.getCustomerlist=l+"/?s=MedicalBeauty.Customerlist",s.changestatus=l+"/?s=MedicalBeauty.changestatus",s.addCustomer=l+"/?s=MedicalBeauty.addCustomer",s.examination=l+"/?s=MedicalBeauty.examination",s.addexamination=l+"/?s=MedicalBeauty.addexamination",s.studymessage=l+"/?s=MedicalBeauty.studymessage",s.exammessage=l+"/?s=MedicalBeauty.exammessage",s.answerinfo=l+"/?s=MedicalBeauty.answerinfo",s.questionslist=l+"/?s=MedicalBeauty.questionslist",s.questionsdel=l+"/?s=MedicalBeauty.questionsdel",s.questionsadd=l+"/?s=MedicalBeauty.questionsadd",s.curriculumlist=l+"/?s=MedicalBeauty.curriculumlist",s.curriculumadd=l+"/?s=MedicalBeauty.curriculumadd",s.curriculumdel=l+"/?s=MedicalBeauty.curriculumdel",s.materialist=l+"/?s=MedicalBeauty.materialist",s.materiaedit=l+"/?s=MedicalBeauty.materiaedit",s.uploadfile=l+"/?s=MedicalBeauty.uploadfile",s.materiaadd=l+"/?s=MedicalBeauty.materiaadd",s.getquesbymid=l+"/?s=MedicalBeauty.getquesbymid",s.changektms=l+"/?s=MedicalBeauty.changektms"},ecc7:function(e,t,a){}}]);
//# sourceMappingURL=chunk-d4908270.8f00b6de.js.map