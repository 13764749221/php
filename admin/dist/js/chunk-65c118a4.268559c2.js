(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-65c118a4"],{"8b42":function(e,t,a){"use strict";a.r(t);var s=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("d2-container",[a("div",{staticClass:"messagePromotionAdd mytable"},[a("div",[a("div",{staticStyle:{margin:"20px 0px",overflow:"auto"}},[a("el-col",{staticClass:"jibie"},[e._v("级别：")]),a("el-col",{staticStyle:{width:"200px","margin-right":"10px"}},[a("el-select",{attrs:{placeholder:"选择级别",clearable:""},model:{value:e.signvalue,callback:function(t){e.signvalue=t},expression:"signvalue"}},e._l(e.signinfo,function(e){return a("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})}),1)],1),a("el-col",{staticStyle:{width:"180px","margin-right":"20px"}},[a("el-input",{staticClass:"orderkeywordcl",attrs:{placeholder:"搜索名字",clearable:""},model:{value:e.name,callback:function(t){e.name=t},expression:"name"}})],1),a("el-col",{staticStyle:{width:"100px"}},[a("el-button",{attrs:{type:"primary",icon:"el-icon-search",round:"",loading:e.loadingStatus},on:{click:function(t){return e.getServiceData()}}},[e._v("搜索")])],1),a("el-col",{staticStyle:{width:"100px","margin-left":"20px"}},[a("el-button",{attrs:{type:"primary",icon:"el-icon-circle-plus-outline",round:""},on:{click:function(t){return e.adddata()}}},[e._v("添加客服")])],1)],1)]),a("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.loadingStatus,expression:"loadingStatus"}],staticStyle:{"margin-top":"20px"},attrs:{data:e.orderData,border:"",stripe:""}},[a("el-table-column",{attrs:{prop:"realname",label:"姓名"}}),a("el-table-column",{attrs:{prop:"phone",label:"手机号"}}),a("el-table-column",{attrs:{prop:"achievement",label:"转正成绩"}}),a("el-table-column",{attrs:{prop:"study_score",label:"学习积分"}}),a("el-table-column",{attrs:{prop:"level",label:"级别"},scopedSlots:e._u([{key:"default",fn:function(t){return[1==t.row.level?a("span",[e._v("转正")]):a("span",[e._v("试用")])]}}])}),a("el-table-column",{attrs:{prop:"ruzhi_date",label:"入职时间",width:"160px"}}),a("el-table-column",{attrs:{prop:"count",label:"转正操作","render-header":e.addTCTip,"label-class-name":"转正条件：转正成绩大于60分，入职满3月，学习积分大于30分。"},scopedSlots:e._u([{key:"default",fn:function(t){return[0==t.row.level?a("span",{staticClass:"spanstyle",on:{click:function(a){return e.changetrue(t.row)}}},[e._v("转正")]):a("span",[e._v("已转正")])]}}])}),a("el-table-column",{attrs:{prop:"status",label:"操作"},scopedSlots:e._u([{key:"default",fn:function(t){return[1==t.row.status?a("span",{staticClass:"stop",on:{click:function(a){return e.changestatus(t.row)}}},[e._v("禁用")]):a("span",{staticClass:"start",on:{click:function(a){return e.changestatus(t.row)}}},[e._v("启用")])]}}])})],1),a("div",{staticStyle:{"text-align":"center"}},[a("el-pagination",{attrs:{"current-page":e.page,"page-sizes":[10,20,30,50,100],"page-size":e.page_count,layout:"total, sizes, prev, pager, next, jumper",total:e.total_count},on:{"size-change":e.handleSizeChange,"current-change":e.handleCurrentChange}})],1)],1),a("el-dialog",{staticStyle:{"margin-top":"20vh"},attrs:{visible:e.showchangetrue,width:"30%",center:""},on:{"update:visible":function(t){e.showchangetrue=t}}},[a("div",{staticClass:"diacenter"},[e._v(" 确认要转正吗？")]),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{attrs:{type:"primary",loading:e.laoding_a},on:{click:function(t){return e.changelevel()}}},[e._v("确 定")])],1)]),a("el-dialog",{staticStyle:{"margin-top":"15vh"},attrs:{visible:e.showchangefalse,width:"30%",center:""},on:{"update:visible":function(t){e.showchangefalse=t}}},[a("div",{staticClass:"diacenter"},[e._v(" 不满足转正条件")]),a("div",{staticClass:"faslecenter"},[a("div",[a("span",{staticClass:"falsespan"},[e._v("转正成绩大于60分")]),e.condition_a?a("i",{staticClass:"el-icon-success"}):a("i",{staticClass:"el-icon-error"})]),a("div",[a("span",{staticClass:"falsespan"},[e._v("入职满3月")]),e.condition_b?a("i",{staticClass:"el-icon-success"}):a("i",{staticClass:"el-icon-error"})]),a("div",[a("span",{staticClass:"falsespan"},[e._v("学习积分大于30分")]),e.condition_c?a("i",{staticClass:"el-icon-success"}):a("i",{staticClass:"el-icon-error"})])]),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{attrs:{type:"primary"},on:{click:function(t){return e.closedialog()}}},[e._v("确 定")])],1)]),a("el-dialog",{attrs:{title:"添加客服",visible:e.outerVisible},on:{"update:visible":function(t){e.outerVisible=t},close:function(t){return e.resetForm("ruleForm")}}},[a("el-form",{ref:"ruleForm",staticClass:"demo-ruleForm",attrs:{model:e.ruleForm,rules:e.rules,"label-width":"100px"}},[a("el-form-item",{attrs:{label:"姓名：",prop:"name"}},[a("el-input",{staticStyle:{width:"218px"},model:{value:e.ruleForm.name,callback:function(t){e.$set(e.ruleForm,"name",t)},expression:"ruleForm.name"}})],1),a("el-form-item",{attrs:{label:"手机号码：",prop:"phone"}},[a("el-input",{staticStyle:{width:"218px"},model:{value:e.ruleForm.phone,callback:function(t){e.$set(e.ruleForm,"phone",t)},expression:"ruleForm.phone"}})],1),a("el-form-item",{attrs:{label:"入职日期：",prop:"date"}},[a("el-date-picker",{staticStyle:{width:"218px"},attrs:{type:"date",placeholder:"选择入职日期"},model:{value:e.ruleForm.date,callback:function(t){e.$set(e.ruleForm,"date",t)},expression:"ruleForm.date"}})],1),a("el-form-item",[a("el-button",{attrs:{type:"primary",loading:e.laoding_b},on:{click:function(t){return e.submitForm("ruleForm")}}},[e._v("添加")]),a("el-button",{on:{click:function(t){return e.resetForm("ruleForm")}}},[e._v("取消")])],1)],1)],1)],1)},i=[],n=(a("7f7f"),a("d84e")),l={data:function(){return{name:"",loadingStatus:!1,signup:!1,page:1,page_count:10,total_count:0,orderData:[],signvalue:"",signinfo:[{value:"0",label:"试用"},{value:"1",label:"转正"}],showchangetrue:!1,user_id:"",laoding_a:!1,showchangefalse:!1,condition_a:!1,condition_b:!1,condition_c:!1,outerVisible:!1,ruleForm:{name:"",phone:"",date:""},rules:{name:[{required:!0,message:"请输入姓名",trigger:"blur"}],phone:[{required:!0,message:"请输入手机号码",trigger:"blur"}],date:[{type:"date",required:!0,message:"请选择入职日期",trigger:"change"}]},laoding_b:!1}},created:function(){this.getServiceData()},methods:{adddata:function(){this.outerVisible=!0},dateFormat:function(e){var t=/^(\d{4})-(\d{2})-(\d{2}) (\d{2}):(\d{2}):(\d{2})$/;if(t.test(e))return e;var a=e.getFullYear(),s=e.getMonth()+1;s=s<10?"0"+s:s;var i=e.getDate();i=i<10?"0"+i:i;var n=e.getHours();n=n<10?"0"+n:n;var l=e.getMinutes();l=l<10?"0"+l:l;var r=e.getSeconds();return r=r<10?"0"+r:r,a+"-"+s+"-"+i},submitForm:function(e){var t=this;this.$refs[e].validate(function(e){if(!e)return!1;t.laoding_b=!0;var a="&name="+t.ruleForm.name+"&phone="+t.ruleForm.phone+"&date="+t.dateFormat(t.ruleForm.date);t.$http.get(n["a"].addCustomer+a).then(function(e){var a=e.data.data;t.laoding_b=!1,""!=a.msg?t.$message({message:a.msg,type:"error"}):(t.$message({message:"成功",type:"success"}),t.getServiceData(),t.resetForm("ruleForm"))},function(){this.laoding_b=!1,this.$message({message:"请求失败",type:"error"})})})},resetForm:function(e){this.outerVisible=!1,this.$refs[e].resetFields()},closedialog:function(){this.showchangefalse=!1},changetrue:function(e){this.user_id=e.id;var t=new Date(e.ruzhi_date),a=Date.parse(t),s=a/1e3+7776e3,i=new Date,n=Date.parse(i),l=n/1e3;if(e.achievement<60||e.study_score<30||s>l)return e.achievement<60?this.condition_a=!1:this.condition_a=!0,e.study_score<30?this.condition_c=!1:this.condition_c=!0,this.condition_b=!(s>l),void(this.showchangefalse=!0);this.showchangetrue=!0},changelevel:function(){var e="&level=1&id="+this.user_id;this.laoding_a=!0,this.useapistatus(e)},useapistatus:function(e){var t=this;this.$http.get(n["a"].changestatus+e).then(function(e){var a=e.data.data;t.laoding_a=!1,""==a.msg?(t.$message({type:"success",message:"操作成功!"}),t.showchangetrue=!1,t.getServiceData()):t.$message({type:"error",message:a.msg})},function(){this.loadingStatus=!1,this.$message({message:"请求失败",type:"error"})})},addTCTip:function(e,t){var a=t.column;if(a.labelClassName){var s=e("span",{},[e("span",{},a.label),e("el-popover",{props:{placement:"top-start",width:"200",trigger:"hover",content:a.labelClassName}},[e("el-button",{slot:"reference",props:{type:"text",icon:"el-icon-question"}},"")])]);return s}},changestatus:function(e){var t=this,a="启用",s=1;if(1==e.status)a="禁用",s=0;this.$confirm("此操作将"+a+"该用户权限, 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){var a="&status="+s+"&id="+e.id;t.useapistatus(a)}).catch(function(){t.$message({type:"info",message:"已取消操作"})})},getServiceData:function(){var e=this;this.loadingStatus=!0;var t="&page="+this.page+"&page_size="+this.page_count+"&name="+this.name+"&signvalue="+this.signvalue;this.$http.get(n["a"].getCustomerlist+t).then(function(t){var a=t.data.data;0==t.data.msg&&(e.total_count=a.count,e.orderData=a.res,e.loadingStatus=!1)},function(){this.loadingStatus=!1,this.$message({message:"请求失败",type:"error"})})},handleSizeChange:function(e){this.page_count=30,e>0&&(this.page_count=e),this.getServiceData()},handleCurrentChange:function(e){this.page=0==e?1:e,this.getServiceData()}}},r=l,o=(a("a14d"),a("2877")),c=function(e){e.options.__source="src/views/yun/shortmessage/customer/customer.vue"},u=c,d=Object(o["a"])(r,s,i,!1,null,"59d7d93c",null);"function"===typeof u&&u(d);t["default"]=d.exports},a14d:function(e,t,a){"use strict";var s=a("cd0d"),i=a.n(s);i.a},cd0d:function(e,t,a){},d84e:function(e,t,a){"use strict";a.d(t,"a",function(){return i});var s=window.location.protocol+"//"+document.domain+"/api/public",i={};i.getCustomerlist=s+"/?s=MedicalBeauty.Customerlist",i.changestatus=s+"/?s=MedicalBeauty.changestatus",i.addCustomer=s+"/?s=MedicalBeauty.addCustomer",i.examination=s+"/?s=MedicalBeauty.examination",i.addexamination=s+"/?s=MedicalBeauty.addexamination",i.studymessage=s+"/?s=MedicalBeauty.studymessage",i.exammessage=s+"/?s=MedicalBeauty.exammessage",i.answerinfo=s+"/?s=MedicalBeauty.answerinfo",i.questionslist=s+"/?s=MedicalBeauty.questionslist",i.questionsdel=s+"/?s=MedicalBeauty.questionsdel",i.questionsadd=s+"/?s=MedicalBeauty.questionsadd",i.curriculumlist=s+"/?s=MedicalBeauty.curriculumlist",i.curriculumadd=s+"/?s=MedicalBeauty.curriculumadd",i.curriculumdel=s+"/?s=MedicalBeauty.curriculumdel",i.materialist=s+"/?s=MedicalBeauty.materialist",i.materiaedit=s+"/?s=MedicalBeauty.materiaedit",i.uploadfile=s+"/?s=MedicalBeauty.uploadfile",i.materiaadd=s+"/?s=MedicalBeauty.materiaadd",i.getquesbymid=s+"/?s=MedicalBeauty.getquesbymid",i.changektms=s+"/?s=MedicalBeauty.changektms"}}]);
//# sourceMappingURL=chunk-65c118a4.268559c2.js.map